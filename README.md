# Hacked Hello

‏## Description

‏This repository contains an original hello.cpp script and a modified (“hacked”) version, along with compiled binaries and JSON diff files generated using Radare2 tools. The goal was to demonstrate how to patch a compiled binary at runtime and capture the differences in JSON format for later inspection.

‏## Contents

‏- hello.cpp: C++ source file printing “Hello World!”
‏- hello (or hello.exe on Windows/ELF binary on Linux): Compiled binary of hello.cpp
‏- hacked: Modified compiled binary where “Hello World!” was replaced with “Hacked World!”
‏- patchHW.json: JSON diff file generated by running radiff2 -u hello hacked > patchHW.json
‏- HW_disasm.json: Disassembled JSON output showing the changed instructions around the “Hello World!” string in the patched binary

‏## Files

‏1. ‏hello.cpp
‏ - Contains a simple C++ program:
‏ ```cpp
‏ #include <iostream>

‏ int main()
‏ {
‏ std::cout << "Hello World!" << std::endl;
‏ return 0;
‏ }
‏ ```
‏ - Compile using g++ hello.cpp -o hello (on Linux/macOS) or an equivalent compiler command.

‏2. ‏hello
‏ - The compiled executable of hello.cpp. Running it prints:
‏ ‏ Hello World! ‏

‏3. ‏hacked
‏ - This binary was created by opening hello in Radare2:
‏ ‏ r2 hello ‏
‏ - In visual mode, the string “Hello World!” is located at address 0x9C0 (for example). To patch, enter write mode and use the command:
‏ ‏ Hacked World @ 0x9C1 ‏
‏ - Save the modified binary by writing to disk (:w), and name the new file hacked.

‏4. ‏patchHW.json
‏ - Generated with Radare2’s radiff2 tool to compare the original and hacked binaries in JSON unified diff format:
‏ ‏ radiff2 -u hello hacked > patchHW.json ‏
‏ - Contains the byte-level differences, showing how the ASCII bytes for “Hello World!” were replaced by “Hacked World!”.

‏5. ‏HW_disasm.json
‏ - Extracted by disassembling the hacked binary around the patched instructions and dumping JSON output:
‏ ‏ r2 -A -c 'pij @ main' hacked > HW_disasm.json ‏
‏ - Includes lines similar to:
‏ json ‏ { ‏ "offset": 2424, ‏ "opcode": "stp", ‏ "bytes": "fd7bbfa9", ‏ "comment": "", ‏ ... ‏ }, ‏ { ‏ "offset": 2428, ‏ "opcode": "mov", ‏ "bytes": "fd030091", ‏ ... ‏ }, ‏ { ‏ "offset": 2432, ‏ "opcode": "adrp", ‏ "bytes": "00000090", ‏ "comment": "str.Hello_World_ ; \"Hello World!\"" ‏ }, ‏ ... ‏ { ‏ "offset": 2444, ‏ "opcode": "ldr", ‏ "bytes": "00e447f9", ‏ "comment": "reloc.std::cout" ‏ } ‏
‏ - This JSON helps inspect how the loader references the string and how the patch altered those bytes.

‏## How to Build and Reproduce

‏1. ‏Install Radare2 (version ≥4.0 recommended) and a C++ compiler (e.g., g++) on a Linux or macOS system.
‏2. ‏Clone or download this repository.
‏3. ‏Compile the original source:
‏ ‏ g++ hello.cpp -o hello ‏
‏4. ‏Open the compiled hello binary in Radare2:
‏ ‏ r2 hello ‏
‏5. ‏Switch to Visual mode by pressing V. Navigate to the string declaration for “Hello World!” (for example, at address 0x9C0).
‏6. ‏Enter write mode by pressing : and type or paste the patch command:
‏ ‏ Hacked World @ 0x9C1 ‏
‏7. ‏Save the patched binary by typing :w hacked and exit Radare2 (:q). You now have hacked.
‏8. ‏Generate a JSON diff between the two binaries:
‏ ‏ radiff2 -u hello hacked > patchHW.json ‏
‏9. ‏Disassemble the patched binary around main and export as JSON:
‏ ‏ r2 -A -c 'pij @ main' hacked > HW_disasm.json ‏
‏10. ‏Verify the patched output by running:
‏ ‏ ./hacked ‏
‏ which should print:
‏ ‏ Hacked World! ‏

‏## Explanation of the Patch

‏- ‏The original “Hello World!” string resides in the read-only data section of the compiled binary.
‏- ‏By patching at offset 0x9C1 (which points to the first character of “Hello World!”), the ASCII sequence is overwritten with “Hacked World!”. Since “Hacked” and “Hello” both have five letters, no null-termination issues occur.
‏- ‏Radare2 automatically updates any relative relocations or references when writing the modified bytes.
‏- ‏The radiff2 tool compares raw bytes and outputs a unified diff in JSON, making it easy to programmatically parse which bytes changed.
‏- ‏The pij command inside Radare2 (“print instruction JSON”) dumps each instruction’s metadata, helping track how the patched string is loaded and printed.

‏## Usage

‏1. ‏Run the original binary:
‏ ‏ ./hello ‏
‏ Output: Hello World!
‏2. ‏Run the patched binary:
‏ ‏ ./hacked ‏
‏ Output: Hacked World!
‏3. ‏Inspect patchHW.json to see byte-level differences.
‏4. ‏Inspect HW_disasm.json for detailed disassembly of the patched code.

‏## Requirements

‏- ‏Radare2 (≥ version 4.0)
‏- ‏Radiff2 (bundled with Radare2)
‏- ‏C++ compiler (e.g., g++)
‏- ‏Basic familiarity with command-line tools and binary patching concepts

‏## License

‏This project is provided for educational purposes. Feel free to fork and modify, respecting the original author’s intent.
